<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>NovaECS - v1.0.11</title><meta name="description" content="Documentation for NovaECS"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">NovaECS - v1.0.11</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>NovaECS - v1.0.11</h1></div><div class="tsd-panel tsd-typography"><h1 id="novaecs" class="tsd-anchor-link">NovaECS<a href="#novaecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Pure data-oriented Entity Component System (ECS) framework built with TypeScript, designed for high performance and simplicity.
çº¯æ•°æ®å¯¼å‘çš„Entity Component System (ECS) æ¡†æ¶ï¼Œä½¿ç”¨TypeScriptæ„å»ºï¼Œä¸“ä¸ºé«˜æ€§èƒ½å’Œç®€æ´æ€§è®¾è®¡ã€‚</p>
<p><a href="https://github.com/esengine/NovaECS/actions"><img src="https://github.com/esengine/NovaECS/workflows/CI/badge.svg" alt="CI"></a>
<a href="https://badge.fury.io/js/%40esengine%2Fnova-ecs"><img src="https://badge.fury.io/js/%40esengine%2Fnova-ecs.svg" alt="npm version"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></p>
<h2 id="features--ç‰¹æ€§" class="tsd-anchor-link">Features | ç‰¹æ€§<a href="#features--ç‰¹æ€§" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>ğŸš€ <strong>Pure Data-Oriented</strong>: Numeric entity handles with generation-based memory safety
<strong>çº¯æ•°æ®å¯¼å‘</strong>: æ•°å€¼å®ä½“å¥æŸ„ï¼ŒåŸºäºä¸–ä»£çš„å†…å­˜å®‰å…¨</li>
<li>âš¡ <strong>High Performance</strong>: Sparse-set storage with O(1) component operations
<strong>é«˜æ€§èƒ½</strong>: ç¨€ç–é›†å­˜å‚¨ï¼ŒO(1)ç»„ä»¶æ“ä½œ</li>
<li>ğŸ”§ <strong>TypeScript</strong>: Complete type support for excellent development experience
<strong>TypeScript</strong>: å®Œæ•´çš„ç±»å‹æ”¯æŒï¼Œæä¾›ä¼˜ç§€çš„å¼€å‘ä½“éªŒ</li>
<li>ğŸ¯ <strong>Smart Query System</strong>: Intelligent anchor selection for optimal query performance
<strong>æ™ºèƒ½æŸ¥è¯¢</strong>: æ™ºèƒ½é”šç‚¹é€‰æ‹©ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½</li>
<li>ğŸ“‹ <strong>Command Buffer</strong>: Batched operations with automatic deduplication
<strong>å‘½ä»¤ç¼“å†²</strong>: æ‰¹é‡æ“ä½œï¼Œè‡ªåŠ¨å»é‡</li>
<li>â±ï¸ <strong>Frame Tracking</strong>: Built-in change detection with frame-based timestamps
<strong>å¸§è¿½è¸ª</strong>: å†…ç½®å˜æ›´æ£€æµ‹ï¼ŒåŸºäºå¸§çš„æ—¶é—´æˆ³</li>
<li>ğŸ”€ <strong>System Scheduler</strong>: Dependency resolution with topological sorting
<strong>ç³»ç»Ÿè°ƒåº¦</strong>: ä¾èµ–è§£æï¼Œæ‹“æ‰‘æ’åº</li>
<li>ğŸ® <strong>Game Loop Ready</strong>: Complete execution stages (startup, preUpdate, update, postUpdate, cleanup)
<strong>æ¸¸æˆå¾ªç¯</strong>: å®Œæ•´æ‰§è¡Œé˜¶æ®µï¼ˆå¯åŠ¨ã€é¢„æ›´æ–°ã€æ›´æ–°ã€åæ›´æ–°ã€æ¸…ç†ï¼‰</li>
<li>â° <strong>Fixed Timestep</strong>: Stable simulation with accumulator pattern for physics and deterministic gameplay
<strong>å›ºå®šæ—¶é—´æ­¥</strong>: ä½¿ç”¨ç´¯åŠ å™¨æ¨¡å¼çš„ç¨³å®šæ¨¡æ‹Ÿï¼Œç”¨äºç‰©ç†å’Œç¡®å®šæ€§æ¸¸æˆç©æ³•</li>
<li>ğŸŒ <strong>Multi-Platform</strong>: Support for Browser, Node.js, and other JavaScript environments
<strong>å¤šå¹³å°</strong>: æ”¯æŒæµè§ˆå™¨ã€Node.jsç­‰JavaScriptç¯å¢ƒ</li>
<li>ğŸ“¦ <strong>Modular</strong>: Multiple build formats including ES/UMD/CommonJS
<strong>æ¨¡å—åŒ–</strong>: ES/UMD/CommonJSå¤šç§æ„å»ºæ ¼å¼</li>
</ul>
<h2 id="installation--å®‰è£…" class="tsd-anchor-link">Installation | å®‰è£…<a href="#installation--å®‰è£…" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@esengine/nova-ecs</span>
</code><button type="button">Copy</button></pre>

<h2 id="api-documentation--api-æ–‡æ¡£" class="tsd-anchor-link">API Documentation | API æ–‡æ¡£<a href="#api-documentation--api-æ–‡æ¡£" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For complete API documentation, visit: <a href="https://esengine.github.io/NovaECS/">https://esengine.github.io/NovaECS/</a>
å®Œæ•´çš„APIæ–‡æ¡£è¯·è®¿é—®ï¼š<a href="https://esengine.github.io/NovaECS/">https://esengine.github.io/NovaECS/</a></p>
<h2 id="quick-start--å¿«é€Ÿå¼€å§‹" class="tsd-anchor-link">Quick Start | å¿«é€Ÿå¼€å§‹<a href="#quick-start--å¿«é€Ÿå¼€å§‹" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">World</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@esengine/nova-ecs&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">system</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@esengine/nova-ecs/core/System&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Scheduler</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@esengine/nova-ecs/core/Scheduler&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// ç»„ä»¶å®šä¹‰ | Define components</span><br/><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">Position</span><span class="hl-1"> { </span><span class="hl-4">x</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; </span><span class="hl-4">y</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; }</span><br/><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">Velocity</span><span class="hl-1"> { </span><span class="hl-4">x</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; </span><span class="hl-4">y</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; }</span><br/><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">Disabled</span><span class="hl-1"> {}</span><br/><br/><span class="hl-5">// ç³»ç»Ÿå®šä¹‰ | Define systems</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">MoveSystem</span><span class="hl-1"> = </span><span class="hl-0">system</span><span class="hl-1">(</span><span class="hl-2">&#39;Move&#39;</span><span class="hl-1">, (</span><span class="hl-4">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">world</span><br/><span class="hl-1">    .</span><span class="hl-0">query</span><span class="hl-1">(</span><span class="hl-4">Position</span><span class="hl-1">, </span><span class="hl-4">Velocity</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">without</span><span class="hl-1">(</span><span class="hl-4">Disabled</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">e</span><span class="hl-1">, </span><span class="hl-4">p</span><span class="hl-1">, </span><span class="hl-4">v</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">p</span><span class="hl-1">.</span><span class="hl-4">x</span><span class="hl-1"> += </span><span class="hl-4">v</span><span class="hl-1">.</span><span class="hl-4">x</span><span class="hl-1"> * </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">deltaTime</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">p</span><span class="hl-1">.</span><span class="hl-4">y</span><span class="hl-1"> += </span><span class="hl-4">v</span><span class="hl-1">.</span><span class="hl-4">y</span><span class="hl-1"> * </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">deltaTime</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">markChanged</span><span class="hl-1">(</span><span class="hl-4">e</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">})</span><br/><span class="hl-1">  .</span><span class="hl-0">stage</span><span class="hl-1">(</span><span class="hl-2">&#39;update&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">inSet</span><span class="hl-1">(</span><span class="hl-2">&#39;Gameplay&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">build</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">SpawnSystem</span><span class="hl-1"> = </span><span class="hl-0">system</span><span class="hl-1">(</span><span class="hl-2">&#39;Spawn&#39;</span><span class="hl-1">, (</span><span class="hl-4">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">cmd</span><span class="hl-1"> = </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">commandBuffer</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">e</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-6">true</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">e</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">, { </span><span class="hl-4">x:</span><span class="hl-1"> </span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-4">y:</span><span class="hl-1"> </span><span class="hl-8">10</span><span class="hl-1"> });</span><br/><span class="hl-1">  </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">e</span><span class="hl-1">, </span><span class="hl-4">Velocity</span><span class="hl-1">, { </span><span class="hl-4">x:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-4">y:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1"> });</span><br/><span class="hl-1">})</span><br/><span class="hl-1">  .</span><span class="hl-0">stage</span><span class="hl-1">(</span><span class="hl-2">&#39;preUpdate&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">before</span><span class="hl-1">(</span><span class="hl-2">&#39;set:Gameplay&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">flushPolicy</span><span class="hl-1">(</span><span class="hl-2">&#39;afterStage&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">build</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">KillSleepingSystem</span><span class="hl-1"> = </span><span class="hl-0">system</span><span class="hl-1">(</span><span class="hl-2">&#39;KillSleeping&#39;</span><span class="hl-1">, (</span><span class="hl-4">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">cmd</span><span class="hl-1"> = </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">commandBuffer</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">(</span><span class="hl-4">Velocity</span><span class="hl-1">).</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">e</span><span class="hl-1">, </span><span class="hl-4">v</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">v</span><span class="hl-1">.</span><span class="hl-4">x</span><span class="hl-1"> === </span><span class="hl-8">0</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">v</span><span class="hl-1">.</span><span class="hl-4">y</span><span class="hl-1"> === </span><span class="hl-8">0</span><span class="hl-1">) </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">destroy</span><span class="hl-1">(</span><span class="hl-4">e</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">})</span><br/><span class="hl-1">  .</span><span class="hl-0">stage</span><span class="hl-1">(</span><span class="hl-2">&#39;postUpdate&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">after</span><span class="hl-1">(</span><span class="hl-2">&#39;Move&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">build</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// è°ƒåº¦å™¨ç»„è£… | Scheduler setup</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">scheduler</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Scheduler</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">SpawnSystem</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">MoveSystem</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">KillSleepingSystem</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// åˆ›å»ºä¸–ç•Œ | Create world</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">world</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">World</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// æ¸¸æˆå¾ªç¯ | Game loop</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">mainLoop</span><span class="hl-1">(</span><span class="hl-4">deltaTime</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">// è‡ªåŠ¨æ‰§è¡Œï¼šbeginFrame() -&gt; startup -&gt; preUpdate -&gt; update -&gt; postUpdate</span><br/><span class="hl-1">  </span><span class="hl-5">// startupé˜¶æ®µä»…ç¬¬ä¸€æ¬¡tickæ—¶è¿è¡Œ</span><br/><span class="hl-1">  </span><span class="hl-4">scheduler</span><span class="hl-1">.</span><span class="hl-0">tick</span><span class="hl-1">(</span><span class="hl-4">world</span><span class="hl-1">, </span><span class="hl-4">deltaTime</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// å¯åŠ¨æ¸¸æˆå¾ªç¯ | Start game loop</span><br/><span class="hl-0">setInterval</span><span class="hl-1">(() </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-0">mainLoop</span><span class="hl-1">(</span><span class="hl-8">16</span><span class="hl-1">), </span><span class="hl-8">16</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="core-concepts--æ ¸å¿ƒæ¦‚å¿µ" class="tsd-anchor-link">Core Concepts | æ ¸å¿ƒæ¦‚å¿µ<a href="#core-concepts--æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="entity-handles--å®ä½“å¥æŸ„" class="tsd-anchor-link">Entity Handles | å®ä½“å¥æŸ„<a href="#entity-handles--å®ä½“å¥æŸ„" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Entities are represented as numeric handles with generation-based safety:
å®ä½“è¡¨ç¤ºä¸ºæ•°å€¼å¥æŸ„ï¼Œå…·æœ‰åŸºäºä¸–ä»£çš„å®‰å…¨æ€§ï¼š</p>
<pre><code class="typescript"><span class="hl-5">// Entity is just a number (28-bit index + 20-bit generation)</span><br/><span class="hl-5">// Entityåªæ˜¯ä¸€ä¸ªæ•°å­—ï¼ˆ28ä½ç´¢å¼• + 20ä½ä¸–ä»£ï¼‰</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">entity</span><span class="hl-1">: </span><span class="hl-7">Entity</span><span class="hl-1"> = </span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">createEntity</span><span class="hl-1">();</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">); </span><span class="hl-5">// e.g., 268435457</span><br/><br/><span class="hl-5">// Check if entity is still alive</span><br/><span class="hl-5">// æ£€æŸ¥å®ä½“æ˜¯å¦ä»ç„¶å­˜åœ¨</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">isAlive</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Entity is valid å®ä½“æœ‰æ•ˆ</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="component-storage--ç»„ä»¶å­˜å‚¨" class="tsd-anchor-link">Component Storage | ç»„ä»¶å­˜å‚¨<a href="#component-storage--ç»„ä»¶å­˜å‚¨" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Components are stored using sparse-set data structure for O(1) operations:
ç»„ä»¶ä½¿ç”¨ç¨€ç–é›†æ•°æ®ç»“æ„å­˜å‚¨ï¼Œå®ç°O(1)æ“ä½œï¼š</p>
<pre><code class="typescript"><span class="hl-5">// Add component to entity å‘å®ä½“æ·»åŠ ç»„ä»¶</span><br/><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">addComponent</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">, { </span><span class="hl-4">x:</span><span class="hl-1"> </span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-4">y:</span><span class="hl-1"> </span><span class="hl-8">20</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">// Get component from entity ä»å®ä½“è·å–ç»„ä»¶</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">pos</span><span class="hl-1"> = </span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">getComponent</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">pos</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Position: </span><span class="hl-6">${</span><span class="hl-4">pos</span><span class="hl-10">.</span><span class="hl-4">x</span><span class="hl-6">}</span><span class="hl-2">, </span><span class="hl-6">${</span><span class="hl-4">pos</span><span class="hl-10">.</span><span class="hl-4">y</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Remove component from entity ä»å®ä½“ç§»é™¤ç»„ä»¶</span><br/><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">removeComponent</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Check if entity has component æ£€æŸ¥å®ä½“æ˜¯å¦æœ‰ç»„ä»¶</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">hasComponent</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Entity has Position component å®ä½“æœ‰Positionç»„ä»¶</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="command-buffer--å‘½ä»¤ç¼“å†²" class="tsd-anchor-link">Command Buffer | å‘½ä»¤ç¼“å†²<a href="#command-buffer--å‘½ä»¤ç¼“å†²" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use command buffer for batched entity operations:
ä½¿ç”¨å‘½ä»¤ç¼“å†²è¿›è¡Œæ‰¹é‡å®ä½“æ“ä½œï¼š</p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">cmd</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CommandBuffer</span><span class="hl-1">(</span><span class="hl-4">world</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Create entity with components åˆ›å»ºå¸¦ç»„ä»¶çš„å®ä½“</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">entity</span><span class="hl-1"> = </span><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-6">true</span><span class="hl-1">);</span><br/><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">, { </span><span class="hl-4">x:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">, </span><span class="hl-4">y:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1"> });</span><br/><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Velocity</span><span class="hl-1">, { </span><span class="hl-4">x:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-4">y:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">// Modify existing entities ä¿®æ”¹ç°æœ‰å®ä½“</span><br/><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">remove</span><span class="hl-1">(</span><span class="hl-4">otherEntity</span><span class="hl-1">, </span><span class="hl-4">Health</span><span class="hl-1">);</span><br/><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">destroy</span><span class="hl-1">(</span><span class="hl-4">deadEntity</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Apply all changes at once ä¸€æ¬¡æ€§åº”ç”¨æ‰€æœ‰æ›´æ”¹</span><br/><span class="hl-4">cmd</span><span class="hl-1">.</span><span class="hl-0">flush</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="entity-queries--å®ä½“æŸ¥è¯¢" class="tsd-anchor-link">Entity Queries | å®ä½“æŸ¥è¯¢<a href="#entity-queries--å®ä½“æŸ¥è¯¢" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Query entities with specific component combinations:
æŸ¥è¯¢å…·æœ‰ç‰¹å®šç»„ä»¶ç»„åˆçš„å®ä½“ï¼š</p>
<pre><code class="typescript"><span class="hl-5">// Basic query åŸºç¡€æŸ¥è¯¢</span><br/><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">(</span><span class="hl-4">Position</span><span class="hl-1">, </span><span class="hl-4">Velocity</span><span class="hl-1">).</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">pos</span><span class="hl-1">, </span><span class="hl-4">vel</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">pos</span><span class="hl-1">.</span><span class="hl-4">x</span><span class="hl-1"> += </span><span class="hl-4">vel</span><span class="hl-1">.</span><span class="hl-4">x</span><span class="hl-1"> * </span><span class="hl-4">deltaTime</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">pos</span><span class="hl-1">.</span><span class="hl-4">y</span><span class="hl-1"> += </span><span class="hl-4">vel</span><span class="hl-1">.</span><span class="hl-4">y</span><span class="hl-1"> * </span><span class="hl-4">deltaTime</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Query with exclusions å¸¦æ’é™¤æ¡ä»¶çš„æŸ¥è¯¢</span><br/><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">(</span><span class="hl-4">Position</span><span class="hl-1">).</span><span class="hl-0">without</span><span class="hl-1">(</span><span class="hl-4">Disabled</span><span class="hl-1">).</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">pos</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// Process enabled entities only åªå¤„ç†å¯ç”¨çš„å®ä½“</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Query with change detection å¸¦å˜æ›´æ£€æµ‹çš„æŸ¥è¯¢</span><br/><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">query</span><span class="hl-1">(</span><span class="hl-4">Position</span><span class="hl-1">).</span><span class="hl-0">changed</span><span class="hl-1">().</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">pos</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// Process only entities with changed Position components</span><br/><span class="hl-1">  </span><span class="hl-5">// åªå¤„ç†Positionç»„ä»¶å‘ç”Ÿå˜æ›´çš„å®ä½“</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="system-scheduling--ç³»ç»Ÿè°ƒåº¦" class="tsd-anchor-link">System Scheduling | ç³»ç»Ÿè°ƒåº¦<a href="#system-scheduling--ç³»ç»Ÿè°ƒåº¦" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Define and schedule systems with dependencies:
å®šä¹‰å’Œè°ƒåº¦å¸¦ä¾èµ–å…³ç³»çš„ç³»ç»Ÿï¼š</p>
<pre><code class="typescript"><span class="hl-5">// System with stage and dependencies å¸¦é˜¶æ®µå’Œä¾èµ–çš„ç³»ç»Ÿ</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">PhysicsSystem</span><span class="hl-1"> = </span><span class="hl-0">system</span><span class="hl-1">(</span><span class="hl-2">&#39;Physics&#39;</span><span class="hl-1">, (</span><span class="hl-4">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// Physics simulation logic ç‰©ç†æ¨¡æ‹Ÿé€»è¾‘</span><br/><span class="hl-1">})</span><br/><span class="hl-1">  .</span><span class="hl-0">stage</span><span class="hl-1">(</span><span class="hl-2">&#39;update&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">inSet</span><span class="hl-1">(</span><span class="hl-2">&#39;Core&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">before</span><span class="hl-1">(</span><span class="hl-2">&#39;Rendering&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">after</span><span class="hl-1">(</span><span class="hl-2">&#39;Input&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">runIf</span><span class="hl-1">(</span><span class="hl-4">world</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">hasComponent</span><span class="hl-1">(</span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">getSingleton</span><span class="hl-1">(), </span><span class="hl-4">GameRunning</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-0">flushPolicy</span><span class="hl-1">(</span><span class="hl-2">&#39;afterStage&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">build</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// System execution stages ç³»ç»Ÿæ‰§è¡Œé˜¶æ®µ</span><br/><span class="hl-5">// startup: Run once on first tick åœ¨ç¬¬ä¸€æ¬¡tickæ—¶è¿è¡Œä¸€æ¬¡</span><br/><span class="hl-5">// preUpdate: Pre-processing é¢„å¤„ç†</span><br/><span class="hl-5">// update: Main game logic ä¸»è¦æ¸¸æˆé€»è¾‘</span><br/><span class="hl-5">// postUpdate: Post-processing åå¤„ç†</span><br/><span class="hl-5">// cleanup: Resource cleanup èµ„æºæ¸…ç†</span>
</code><button type="button">Copy</button></pre>

<h3 id="change-detection--å˜æ›´æ£€æµ‹" class="tsd-anchor-link">Change Detection | å˜æ›´æ£€æµ‹<a href="#change-detection--å˜æ›´æ£€æµ‹" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Track component changes with frame-based timestamps:
ä½¿ç”¨åŸºäºå¸§çš„æ—¶é—´æˆ³è·Ÿè¸ªç»„ä»¶å˜æ›´ï¼š</p>
<pre><code class="typescript"><span class="hl-5">// Mark component as changed æ ‡è®°ç»„ä»¶ä¸ºå·²å˜æ›´</span><br/><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">markChanged</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Get current frame number è·å–å½“å‰å¸§å·</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">currentFrame</span><span class="hl-1"> = </span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-4">frame</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Check if component changed in specific frame æ£€æŸ¥ç»„ä»¶æ˜¯å¦åœ¨ç‰¹å®šå¸§å˜æ›´</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">changed</span><span class="hl-1"> = </span><span class="hl-4">world</span><span class="hl-1">.</span><span class="hl-0">isChanged</span><span class="hl-1">(</span><span class="hl-4">entity</span><span class="hl-1">, </span><span class="hl-4">Position</span><span class="hl-1">, </span><span class="hl-4">currentFrame</span><span class="hl-1"> - </span><span class="hl-8">1</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="fixed-timestep-simulation--å›ºå®šæ—¶é—´æ­¥æ¨¡æ‹Ÿ" class="tsd-anchor-link">Fixed Timestep Simulation | å›ºå®šæ—¶é—´æ­¥æ¨¡æ‹Ÿ<a href="#fixed-timestep-simulation--å›ºå®šæ—¶é—´æ­¥æ¨¡æ‹Ÿ" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>For deterministic physics and gameplay, use FixedTimestepScheduler:
ç”¨äºç¡®å®šæ€§ç‰©ç†å’Œæ¸¸æˆç©æ³•ï¼Œä½¿ç”¨FixedTimestepSchedulerï¼š</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">FixedTimestepScheduler</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@esengine/nova-ecs/core/FixedTimestepScheduler&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">world</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">World</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">scheduler</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Scheduler</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">fixedScheduler</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">FixedTimestepScheduler</span><span class="hl-1">(</span><span class="hl-4">world</span><span class="hl-1">, </span><span class="hl-4">scheduler</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">fixedDt:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">/</span><span class="hl-8">60</span><span class="hl-1">,          </span><span class="hl-5">// 60 FPSå›ºå®šæ—¶é—´æ­¥é•¿</span><br/><span class="hl-1">  </span><span class="hl-4">maxSubSteps:</span><span class="hl-1"> </span><span class="hl-8">6</span><span class="hl-1">,         </span><span class="hl-5">// æœ€å¤š6æ¬¡å­æ­¥æ•°é˜²æ­¢æ­»äº¡èºæ—‹</span><br/><span class="hl-1">  </span><span class="hl-4">smoothFactor:</span><span class="hl-1"> </span><span class="hl-8">0.1</span><span class="hl-1">,      </span><span class="hl-5">// 10%æ—¶é—´å¹³æ»‘</span><br/><span class="hl-1">  </span><span class="hl-4">clampDt:</span><span class="hl-1"> </span><span class="hl-8">0.25</span><span class="hl-1">,          </span><span class="hl-5">// æœ€å¤§å¸§æ—¶é—´å¤¹ç´§åˆ°0.25ç§’</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// æ¸¸æˆä¸»å¾ªç¯ï¼ˆæµè§ˆå™¨æˆ–åŸç”Ÿç¯å¢ƒï¼‰ | Game main loop (browser or native)</span><br/><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">lastTime</span><span class="hl-1"> = </span><span class="hl-4">performance</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">();</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">gameLoop</span><span class="hl-1">(</span><span class="hl-4">now</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">frameDt</span><span class="hl-1"> = (</span><span class="hl-4">now</span><span class="hl-1"> - </span><span class="hl-4">lastTime</span><span class="hl-1">) / </span><span class="hl-8">1000</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">lastTime</span><span class="hl-1"> = </span><span class="hl-4">now</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">fixedScheduler</span><span class="hl-1">.</span><span class="hl-0">tick</span><span class="hl-1">(</span><span class="hl-4">frameDt</span><span class="hl-1">, (</span><span class="hl-4">alpha</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// ä½¿ç”¨alphaè¿›è¡Œæ¸²æŸ“æ’å€¼ | Use alpha for render interpolation</span><br/><span class="hl-1">    </span><span class="hl-5">// ä¾‹å¦‚ï¼šæ¸²æŸ“ä½ç½® = lerp(prevPos, currPos, alpha)</span><br/><span class="hl-1">    </span><span class="hl-5">// e.g.: renderPos = lerp(prevPos, currPos, alpha)</span><br/><span class="hl-1">    </span><span class="hl-0">renderWithInterpolation</span><span class="hl-1">(</span><span class="hl-4">alpha</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-0">requestAnimationFrame</span><span class="hl-1">(</span><span class="hl-4">gameLoop</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-0">requestAnimationFrame</span><span class="hl-1">(</span><span class="hl-4">gameLoop</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="system-builder-api--ç³»ç»Ÿæ„å»ºå™¨api" class="tsd-anchor-link">System Builder API | ç³»ç»Ÿæ„å»ºå™¨API<a href="#system-builder-api--ç³»ç»Ÿæ„å»ºå™¨api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Complete system configuration with fluent API:
ä½¿ç”¨æµå¼APIè¿›è¡Œå®Œæ•´çš„ç³»ç»Ÿé…ç½®ï¼š</p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-9">MySystem</span><span class="hl-1"> = </span><span class="hl-0">system</span><span class="hl-1">(</span><span class="hl-2">&#39;MySystem&#39;</span><span class="hl-1">, (</span><span class="hl-4">ctx</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// System logic here ç³»ç»Ÿé€»è¾‘</span><br/><span class="hl-1">})</span><br/><span class="hl-1">  .</span><span class="hl-0">stage</span><span class="hl-1">(</span><span class="hl-2">&#39;update&#39;</span><span class="hl-1">)                    </span><span class="hl-5">// Execution stage æ‰§è¡Œé˜¶æ®µ</span><br/><span class="hl-1">  .</span><span class="hl-0">inSet</span><span class="hl-1">(</span><span class="hl-2">&#39;MyGroup&#39;</span><span class="hl-1">)                   </span><span class="hl-5">// System group ç³»ç»Ÿç»„</span><br/><span class="hl-1">  .</span><span class="hl-0">before</span><span class="hl-1">(</span><span class="hl-2">&#39;OtherSystem&#39;</span><span class="hl-1">)              </span><span class="hl-5">// Run before other systems åœ¨å…¶ä»–ç³»ç»Ÿå‰è¿è¡Œ</span><br/><span class="hl-1">  .</span><span class="hl-0">after</span><span class="hl-1">(</span><span class="hl-2">&#39;set:Prerequisites&#39;</span><span class="hl-1">)         </span><span class="hl-5">// Run after system set åœ¨ç³»ç»Ÿé›†åˆåè¿è¡Œ</span><br/><span class="hl-1">  .</span><span class="hl-0">runIf</span><span class="hl-1">(</span><span class="hl-4">world</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">gameIsRunning</span><span class="hl-1">)      </span><span class="hl-5">// Conditional execution æ¡ä»¶æ‰§è¡Œ</span><br/><span class="hl-1">  .</span><span class="hl-0">flushPolicy</span><span class="hl-1">(</span><span class="hl-2">&#39;afterEach&#39;</span><span class="hl-1">)           </span><span class="hl-5">// Command flush policy å‘½ä»¤åˆ·æ–°ç­–ç•¥</span><br/><span class="hl-1">  .</span><span class="hl-0">build</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="performance-tips--æ€§èƒ½æç¤º" class="tsd-anchor-link">Performance Tips | æ€§èƒ½æç¤º<a href="#performance-tips--æ€§èƒ½æç¤º" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="query-optimization--æŸ¥è¯¢ä¼˜åŒ–" class="tsd-anchor-link">Query Optimization | æŸ¥è¯¢ä¼˜åŒ–<a href="#query-optimization--æŸ¥è¯¢ä¼˜åŒ–" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Use the smallest component set for queries æŸ¥è¯¢ä½¿ç”¨æœ€å°çš„ç»„ä»¶é›†</li>
<li>Leverage change detection to avoid unnecessary processing åˆ©ç”¨å˜æ›´æ£€æµ‹é¿å…ä¸å¿…è¦çš„å¤„ç†</li>
<li>Cache frequently used queries ç¼“å­˜é¢‘ç¹ä½¿ç”¨çš„æŸ¥è¯¢</li>
</ul>
<h3 id="memory-management--å†…å­˜ç®¡ç†" class="tsd-anchor-link">Memory Management | å†…å­˜ç®¡ç†<a href="#memory-management--å†…å­˜ç®¡ç†" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Reuse component instances when possible å°½å¯èƒ½é‡ç”¨ç»„ä»¶å®ä¾‹</li>
<li>Use command buffer for batch operations ä½¿ç”¨å‘½ä»¤ç¼“å†²è¿›è¡Œæ‰¹é‡æ“ä½œ</li>
<li>Minimize object allocations in hot paths åœ¨çƒ­è·¯å¾„ä¸­æœ€å°åŒ–å¯¹è±¡åˆ†é…</li>
</ul>
<h3 id="system-design--ç³»ç»Ÿè®¾è®¡" class="tsd-anchor-link">System Design | ç³»ç»Ÿè®¾è®¡<a href="#system-design--ç³»ç»Ÿè®¾è®¡" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Keep systems focused on single responsibilities ä¿æŒç³»ç»Ÿä¸“æ³¨å•ä¸€èŒè´£</li>
<li>Use system sets for logical grouping ä½¿ç”¨ç³»ç»Ÿé›†åˆè¿›è¡Œé€»è¾‘åˆ†ç»„</li>
<li>Declare dependencies explicitly for parallel execution æ˜ç¡®å£°æ˜ä¾èµ–ä»¥æ”¯æŒå¹¶è¡Œæ‰§è¡Œ</li>
</ul>
<h2 id="license--è®¸å¯è¯" class="tsd-anchor-link">License | è®¸å¯è¯<a href="#license--è®¸å¯è¯" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT License - See <a href="LICENSE">LICENSE</a> file for details.
MIT License - è¯¦è§ <a href="LICENSE">LICENSE</a> æ–‡ä»¶ã€‚</p>
<h2 id="contributing--è´¡çŒ®" class="tsd-anchor-link">Contributing | è´¡çŒ®<a href="#contributing--è´¡çŒ®" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Issues and Pull Requests are welcome!
æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼</p>
<h2 id="support--æ”¯æŒ" class="tsd-anchor-link">Support | æ”¯æŒ<a href="#support--æ”¯æŒ" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you encounter problems during use, please:
å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š</p>
<ol>
<li>Check the <a href="https://esengine.github.io/NovaECS/">API Documentation</a>
æŸ¥çœ‹ <a href="https://esengine.github.io/NovaECS/">API æ–‡æ¡£</a></li>
<li>Search existing <a href="https://github.com/esengine/NovaECS/issues">Issues</a>
æœç´¢å·²æœ‰çš„ <a href="https://github.com/esengine/NovaECS/issues">Issues</a></li>
<li>Create a new Issue describing your problem
åˆ›å»ºæ–°çš„ Issue æè¿°æ‚¨çš„é—®é¢˜</li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#novaecs"><span>Nova<wbr/>ECS</span></a><ul><li><a href="#features--ç‰¹æ€§"><span>Features | ç‰¹æ€§</span></a></li><li><a href="#installation--å®‰è£…"><span>Installation | å®‰è£…</span></a></li><li><a href="#api-documentation--api-æ–‡æ¡£"><span>API <wbr/>Documentation | <wbr/>API æ–‡æ¡£</span></a></li><li><a href="#quick-start--å¿«é€Ÿå¼€å§‹"><span>Quick <wbr/>Start | å¿«é€Ÿå¼€å§‹</span></a></li><li><a href="#core-concepts--æ ¸å¿ƒæ¦‚å¿µ"><span>Core <wbr/>Concepts | æ ¸å¿ƒæ¦‚å¿µ</span></a></li><li><ul><li><a href="#entity-handles--å®ä½“å¥æŸ„"><span>Entity <wbr/>Handles | å®ä½“å¥æŸ„</span></a></li><li><a href="#component-storage--ç»„ä»¶å­˜å‚¨"><span>Component <wbr/>Storage | ç»„ä»¶å­˜å‚¨</span></a></li><li><a href="#command-buffer--å‘½ä»¤ç¼“å†²"><span>Command <wbr/>Buffer | å‘½ä»¤ç¼“å†²</span></a></li><li><a href="#entity-queries--å®ä½“æŸ¥è¯¢"><span>Entity <wbr/>Queries | å®ä½“æŸ¥è¯¢</span></a></li><li><a href="#system-scheduling--ç³»ç»Ÿè°ƒåº¦"><span>System <wbr/>Scheduling | ç³»ç»Ÿè°ƒåº¦</span></a></li><li><a href="#change-detection--å˜æ›´æ£€æµ‹"><span>Change <wbr/>Detection | å˜æ›´æ£€æµ‹</span></a></li><li><a href="#fixed-timestep-simulation--å›ºå®šæ—¶é—´æ­¥æ¨¡æ‹Ÿ"><span>Fixed <wbr/>Timestep <wbr/>Simulation | å›ºå®šæ—¶é—´æ­¥æ¨¡æ‹Ÿ</span></a></li></ul></li><li><a href="#system-builder-api--ç³»ç»Ÿæ„å»ºå™¨api"><span>System <wbr/>Builder <wbr/>API | ç³»ç»Ÿæ„å»ºå™¨<wbr/>API</span></a></li><li><a href="#performance-tips--æ€§èƒ½æç¤º"><span>Performance <wbr/>Tips | æ€§èƒ½æç¤º</span></a></li><li><ul><li><a href="#query-optimization--æŸ¥è¯¢ä¼˜åŒ–"><span>Query <wbr/>Optimization | æŸ¥è¯¢ä¼˜åŒ–</span></a></li><li><a href="#memory-management--å†…å­˜ç®¡ç†"><span>Memory <wbr/>Management | å†…å­˜ç®¡ç†</span></a></li><li><a href="#system-design--ç³»ç»Ÿè®¾è®¡"><span>System <wbr/>Design | ç³»ç»Ÿè®¾è®¡</span></a></li></ul></li><li><a href="#license--è®¸å¯è¯"><span>License | è®¸å¯è¯</span></a></li><li><a href="#contributing--è´¡çŒ®"><span>Contributing | è´¡çŒ®</span></a></li><li><a href="#support--æ”¯æŒ"><span>Support | æ”¯æŒ</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">NovaECS - v1.0.11</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
